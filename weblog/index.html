<!DOCTYPE html>
<html>
    <head>
        <title>coderodde - weblog</title>
        <style>
            h1, h3 {
                text-align: center;
            }
            
            article {
                font-family: "Times New Roman";
                font-size: 12pt;
                text-align: justify;
            }
            
            #main {
                width: 800px;
                margin: auto;
            }
        </style>
        <link rel="stylesheet" type="text/css" href="weblog/algotype_my_config.css">
        <script src="weblog/algotype.js"></script>
    </head>
    <body>
        <div id="main">
            <h1>coderodde's technical weblog</h1>
            <h3>Solving most cost-effective loan problem</h3>
            <article>
                <h4>1 Introduction</h4>
                <p>
                In the most cost-effective loan problem, we are given a directed
                graph of actors where each actor may lend some amount of resources
                it possesses to its child nodes. In case an actor needs more than
                his immediate parents can lend, the parents might need to lend from
                their parents, adjust the interest rate to cover their own expenses,
                and pass the funds to the original lending actor.
                </p>
                
                <p>
                Formally, we are given a directed graph $G = (V, A)$, where $V$
                is the set of actors, and $A \subseteq V^2$ is the set of directed
                arcs. By $V(G)$ we denote the actor set of $G$, and likewise, by
                $A(G)$ we denote the arc set of $G$. Given an arc $(u, v) \in A$,
                we call $u$ a <i>parent</i> of $v$, $v$ a <i>child</i> of $u$. 
                Existence of such an arc indicates that $u$ may lend some or all
                of its resources to $v$. Along the graph, we are given a
                <i>potential function</i> $\mathfrak{P} \colon V \to [0, \infty) = \mathbb{R}_{\geq 0}$
                that maps each actor in the graph to the (non-negative) equity that that very
                node has at its disposal. Finally, we are given an <i>interest rate function</i>
                $\mathfrak{I} \colon A \to \mathbb{R}_{\geq 0}$ that maps each arc
                $(u, v) \in A$ to the interest rate the actor $u$ can offer $v$
                when $v$ decides to lend from $u$.
                </p>
                
                <p>
                Apart from the target data structure, in a problem instance, we
                are given an actor $a \in V$ that applies for a loan, a required
                potential $P \in \mathbb{R}_{\geq 0}$ and a maximum tolerable 
                interest rate $i \in \mathbb{R}_{\geq 0}$. Our aim, then, is to 
                compute a loan (which may involve more than one lending actor) 
                with minimized interest rate.
                </p>
                
                <h4>2 Interest rate model</h4>
                
                <p>
                Throught the post, we assume a simple interest rate mode. The
                accumulated balance at time $t$ since the time point at which the
                loan was issued, with initial principal $\mathfrak{A}$ and interest
                rate $r$ is given by
                \[
                \mathfrak{A}(1 + r)^t.
                \]
                If we have in the graph, for instance, a directed acyclic path 
                $\langle u, v, z \rangle$ with $r_{u,v}$ being the interest rate
                of $(u, v)$, and $r_{v, z}$ being the interest rate of $(v, z)$,
                the interest rate equation becomes
                \[
                \mathfrak{A}(1 + r_{u,v})^t (1 + r_{v,z})^t = \mathfrak{A}\big[ (1 + r_{u,v})(1 + r_{v,z}) \big]^t = \mathfrak{A}(1 + R)^t.
                \]
                Above, $R$ is the <i>combined</i> interest rate. Dividing both 
                sides by $\mathfrak{A}$ and taking $t$-th root, we obtain
                \begin{aligned}
                    (1 + r_{u,v})(1 + r_{v,z}) &= 1 + R \\
                    R + 1 &= 1 + r_{u,v} + r_{v,z} + r_{u,v}r_{v,z} \\
                    R &= r_{u,v} + r_{v,z} + r_{u,v}r_{v,z}. 
                \end{aligned}
                In general, we write $r_1 + r_2 + r_1 r_2 = \mathfrak{C}(r_1, r_2).$
                </p>
                
                <p>
                Since we may deal with entire &guot;loan chains&guot;, we need 
                to define the concept of <i>effective interest rate</i>.
                Effective interest rate is given by 
                \[
                    I(u, v) = 
                    \begin{cases}
                    0 &\mbox{if } u = v, \\
                    \underset{z \in {\rm C{\small HILDREN}}(G, u)}{\min} \, \mathfrak{C}\big(\mathfrak{I}(u, z), I(z, v)\big) &\mbox{otherwise,}
                    \end{cases}
                \]
                where ${\rm C{\small HILDREN}}(G, z)$ is the set of child nodes
                of $z$, or, formally, $\{ u \colon (z, u) \in A(G) \}.$
                </p>
                
                <h4>3 Problem statement</h4>
            </article>
        </div>
    </body>
</html>
